--TEST--
calls the -lm function from C
--SKIPIF--
--FILE--
<?php
use Jq\Input;

$data = array(
    array('atan * 4 * 1000000|floor / 1000000', '1'),
    array('[(3.141592 / 2) * (range(0;20) / 20)|cos * 1000000|floor / 1000000]', 'null'),
    array('[(3.141592 / 2) * (range(0;20) / 20)|sin * 1000000|floor / 1000000]', 'null'),
    array('def f(x): x | x; f([.], . + [42])', '[1,2,3]'),
);

foreach ($data as $value) {
    echo "== ", $value[0], PHP_EOL;
    $jq = Input::fromString($value[1]);
    var_dump($jq->filter($value[0]));
    var_dump($jq->filter($value[0], Jq\RAW));
}

--EXPECTF--
== atan * 4 * 1000000|floor / 1000000
float(3.141592)
string(8) "3.141592"
== [(3.141592 / 2) * (range(0;20) / 20)|cos * 1000000|floor / 1000000]
array(20) {
  [0]=>
  int(1)
  [1]=>
  float(0.996917)
  [2]=>
  float(0.987688)
  [3]=>
  float(0.972369)
  [4]=>
  float(0.951056)
  [5]=>
  float(0.923879)
  [6]=>
  float(0.891006)
  [7]=>
  float(0.85264)
  [8]=>
  float(0.809017)
  [9]=>
  float(0.760406)
  [10]=>
  float(0.707106)
  [11]=>
  float(0.649448)
  [12]=>
  float(0.587785)
  [13]=>
  float(0.522498)
  [14]=>
  float(0.45399)
  [15]=>
  float(0.382683)
  [16]=>
  float(0.309017)
  [17]=>
  float(0.233445)
  [18]=>
  float(0.156434)
  [19]=>
  float(0.078459)
}
string(172) "[1,0.996917,0.987688,0.972369,0.951056,0.923879,0.891006,0.85264,0.809017,0.760406,0.707106,0.649448,0.587785,0.522498,0.45399,0.382683,0.309017,0.233445,0.156434,0.078459]"
== [(3.141592 / 2) * (range(0;20) / 20)|sin * 1000000|floor / 1000000]
array(20) {
  [0]=>
  int(0)
  [1]=>
  float(0.078459)
  [2]=>
  float(0.156434)
  [3]=>
  float(0.233445)
  [4]=>
  float(0.309016)
  [5]=>
  float(0.382683)
  [6]=>
  float(0.45399)
  [7]=>
  float(0.522498)
  [8]=>
  float(0.587785)
  [9]=>
  float(0.649447)
  [10]=>
  float(0.707106)
  [11]=>
  float(0.760405)
  [12]=>
  float(0.809016)
  [13]=>
  float(0.85264)
  [14]=>
  float(0.891006)
  [15]=>
  float(0.923879)
  [16]=>
  float(0.951056)
  [17]=>
  float(0.972369)
  [18]=>
  float(0.987688)
  [19]=>
  float(0.996917)
}
string(172) "[0,0.078459,0.156434,0.233445,0.309016,0.382683,0.45399,0.522498,0.587785,0.649447,0.707106,0.760405,0.809016,0.85264,0.891006,0.923879,0.951056,0.972369,0.987688,0.996917]"
== def f(x): x | x; f([.], . + [42])
array(4) {
  [0]=>
  array(1) {
    [0]=>
    array(1) {
      [0]=>
      array(3) {
        [0]=>
        int(1)
        [1]=>
        int(2)
        [2]=>
        int(3)
      }
    }
  }
  [1]=>
  array(2) {
    [0]=>
    array(3) {
      [0]=>
      int(1)
      [1]=>
      int(2)
      [2]=>
      int(3)
    }
    [1]=>
    int(42)
  }
  [2]=>
  array(1) {
    [0]=>
    array(4) {
      [0]=>
      int(1)
      [1]=>
      int(2)
      [2]=>
      int(3)
      [3]=>
      int(42)
    }
  }
  [3]=>
  array(5) {
    [0]=>
    int(1)
    [1]=>
    int(2)
    [2]=>
    int(3)
    [3]=>
    int(42)
    [4]=>
    int(42)
  }
}
array(4) {
  [0]=>
  string(11) "[[[1,2,3]]]"
  [1]=>
  string(12) "[[1,2,3],42]"
  [2]=>
  string(12) "[[1,2,3,42]]"
  [3]=>
  string(13) "[1,2,3,42,42]"
}
